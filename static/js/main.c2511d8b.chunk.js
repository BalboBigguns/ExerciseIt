(this["webpackJsonpmern-exercise-tracker"]=this["webpackJsonpmern-exercise-tracker"]||[]).push([[0],{101:function(e,t,a){e.exports=a(129)},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),s=a(11),c=a(12),l=a(8),m=a(4),p=a(23),u=a(32),d=a(33),g=a(162),b=Object(g.a)((function(e){return{background:{position:"fixed",width:"100%",height:"100%",zIndex:-1,fontSize:"600px"},"@keyframes slideInBottom":{from:{top:"100vh",opacity:0},to:{top:"50vh",opacity:1}},leftBook:{position:"absolute",left:"-200px",top:"50vh",animationName:"$slideInBottom",animationDuration:"2s",animationDelay:"0.5s",animationTimingFunction:"ease-out",animationFillMode:"backwards",color:e.palette.grey[200]},"@keyframes slideInTop":{from:{top:"-90vh",opacity:0},to:{top:"-40vh",opacity:1}},rightBook:{position:"absolute",right:"-200px",top:"-40vh",animationName:"$slideInTop",animationDuration:"2s",animationTimingFunction:"ease-out",animationDelay:"0.5s",animationFillMode:"backwards",color:e.palette.grey[200]}}})),f=function(e){var t=b();return r.a.createElement("div",{className:t.background},r.a.createElement(u.a,{className:t.leftBook,icon:d.a}),r.a.createElement(u.a,{className:t.rightBook,icon:d.a}))},h=a(165),E=a(166),v=a(167),x=a(168),y=a(169),S=a(92),j=Object(g.a)((function(e){var t,a;return{center:{position:"absolute",top:0,left:0,width:"100%",height:"100%",minHeight:600,display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},mainContainer:Object(l.a)({display:"flex",flexDirection:"column",fontSize:32},e.breakpoints.only("xs"),{width:300}),emphasis:{fontWeight:"bold",fontStyle:"italic"},title:(t={textAlign:"center",fontSize:e.typography.h4.fontSize},Object(l.a)(t,e.breakpoints.up("sm"),{fontSize:e.typography.h3.fontSize}),Object(l.a)(t,e.breakpoints.up("md"),{fontSize:e.typography.h2.fontSize}),t),titleIcon:Object(l.a)({fontSize:80,textAlign:"center",color:e.palette.primary.main},e.breakpoints.up("sm"),{fontSize:120}),content:{flexGrow:1,padding:e.spacing(3)},mainButtonsContainer:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",fontSize:"1em"},mainButton:{flex:"1 1 200px",fontSize:"0.5em",margin:"15px 15px",textAlign:"center"},discoverButton:{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.light}},appBarContainer:{justifyContent:"space-between"},appBarButtons:Object(l.a)({borderRadius:"25px",fontSize:"0.8rem"},e.breakpoints.up("sm"),{fontSize:"1rem",margin:e.spacing(1)}),logoText:(a={fontSize:"1.2rem"},Object(l.a)(a,e.breakpoints.up("sm"),{fontSize:"2rem"}),Object(l.a)(a,e.breakpoints.up("md"),{fontSize:"3rem"}),a)}})),w=function(e){var t=e.children,a=Object(h.a)({disableHysteresis:!0,threshold:0});return r.a.cloneElement(t,{elevation:a?4:0,color:a?"inherit":"transparent"})},O=function(e){var t=Object(E.a)((function(e){return e.breakpoints.down("xs")}),{noSsr:!0});return r.a.createElement(v.a,Object.assign({},e,{variant:t?"text":"contained"}),e.children)},k=function(e){var t=j();return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null,r.a.createElement(x.a,{elevation:0,color:"transparent"},r.a.createElement(y.a,{className:t.appBarContainer},r.a.createElement(S.a,{className:t.logoText},"ExerciseIT"),r.a.createElement("div",null,r.a.createElement(O,{className:t.appBarButtons,color:"secondary",component:p.b,to:"/signup"},"Sign Up"),r.a.createElement(O,{className:t.appBarButtons,color:"secondary",component:p.b,to:"/signin"},"Sign In"))))),r.a.createElement("div",{className:t.center},r.a.createElement("main",{className:t.mainContainer},r.a.createElement(S.a,{variant:"h1",className:t.title},"Manage all your"),r.a.createElement(S.a,{variant:"h1",className:Object(m.a)(t.emphasis,t.title)},"knowledge"),r.a.createElement(S.a,{variant:"h1",className:t.title},"from one place"),r.a.createElement("div",{className:t.titleIcon},r.a.createElement(u.a,{icon:d.a})),r.a.createElement("div",{className:t.mainButtonsContainer},r.a.createElement(v.a,{className:Object(m.a)(t.mainButton,t.discoverButton),color:"secondary",variant:"contained",component:p.b,to:"/"},"Discover ExerciseIT")))),r.a.createElement(f,null))},I=a(15),N=a.n(I),A=a(24),z=a(88),B=a(59),C=a.n(B),T="production_url_not_defined",P=C.a.create({baseURL:T}),D=a(25),M=a(131),F=a(181),L=a(174),R=a(171),U=a(177),W=a(178),q=a(172),_=a(175),J=a(176),H=a(184),Z=a(183),$=function(e){var t=e.children,a=e.error,n=e.setError,o=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement(H.a,{open:a,autoHideDuration:6e3,onClose:o,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(Z.a,{onClose:o,severity:"error"},t))},G=a(49),V=a.n(G),K=Object(g.a)((function(e){return{center:{display:"grid",placeItems:"center",height:"100vh"},mainContainer:Object(l.a)({width:"80vw",margin:"30px 0px",padding:e.spacing(3),display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"center",backgroundColor:e.palette.grey[100]},e.breakpoints.up("md"),{width:"750px"}),logo:Object(l.a)({fontSize:"150px",display:"block",padding:e.spacing(2),color:e.palette.secondary.main},e.breakpoints.up("sm"),{fontSize:"200px"}),formContainer:{display:"flex",flexDirection:"column",width:"300px",color:"white",marginLeft:"15px",marginRight:"15px"},input:{margin:e.spacing(1)},button:{margin:e.spacing(1),padding:e.spacing(1)},wrappedButton:{padding:e.spacing(1)},text:Object(l.a)({margin:e.spacing(1),color:e.palette.grey[800]},e.breakpoints.down("xs"),{fontSize:"0.8rem"}),errorMessage:{color:"red",textAlign:"center"},successMessage:{textAlign:"center",color:V()(e.palette.success.main).setAlpha(.9),fontSize:"0.8rem"},successPaper:{margin:e.spacing(1),padding:e.spacing(1),backgroundColor:V()(e.palette.success.main).setAlpha(.1)},submitErrorMessage:{textAlign:"center",color:V()(e.palette.error.main).setAlpha(.9),fontSize:"0.8rem"},errorPaper:{margin:e.spacing(1),padding:e.spacing(1),backgroundColor:V()(e.palette.error.main).setAlpha(.1)},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"},homeButtonWrapper:{flex:"0 0 100%"},toolbarWrap:{flexWrap:"wrap"}}})),Q=function(){var e,t,a,o,i=Object(z.a)({mode:"onBlur"}),l=i.register,m=i.handleSubmit,g=i.setError,b=i.errors,h=i.getValues,E=Object(D.b)(),x=Object(s.a)(E,2)[1],j=Object(n.useState)(),w=Object(s.a)(j,2),O=w[0],k=w[1],I=Object(n.useState)(),B=Object(s.a)(I,2),C=B[0],T=B[1],H=Object(n.useState)(!1),Z=Object(s.a)(H,2),G=Z[0],V=Z[1],Q=Object(n.useState)(!1),X=Object(s.a)(Q,2),Y=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(!0),ie=Object(s.a)(oe,2),se=ie[0],ce=ie[1],le=Object(c.g)(),me=function(){var e=Object(A.a)(N.a.mark((function e(t){var a,n,r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(!0),e.next=4,P.post("/signup"===le.url?"auth/signup":"auth/signin",t);case 4:a=e.sent,n=a.data,r={accessToken:n.accessToken,expiresAt:n.accessExpiresAt,userInfo:{id:n.id,username:n.username,email:n.email}},x(r),k(n.message),T(""),setTimeout((function(){ee(!0)}),1e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),V(!1),e.t0.response?(o=e.t0.response.data,console.error(o.message),o.errorList&&o.errorList.forEach((function(e){g(e.field,"manual",e.message)})),T(o.message),k("")):e.t0.request?(console.error(JSON.stringify(e.t0)),re(!0)):(console.error("Uhh ohh! Sth went a bit sideways..."),console.error(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),pe=K(),ue="/signup"===le.url,de=function(e){return{required:"".concat(e," is required"),minLength:{value:3,message:"".concat(e," must be longer than 2 letters")},maxLength:{value:15,message:"".concat(e," must be shorter than 16 letters")},pattern:{value:/^[a-zA-Z0-9_]*$/,message:"Only lower and uppercase letters, numbers and _"}}};return r.a.createElement(r.a.Fragment,null,Y&&r.a.createElement(c.a,{to:"/dashboard"}),r.a.createElement($,{error:ne,setError:re},"Oi mate! Check your internet plug and try again."),r.a.createElement("div",{className:pe.center},r.a.createElement(M.a,{className:pe.mainContainer},r.a.createElement("div",{className:pe.homeButtonWrapper},r.a.createElement(v.a,{color:"secondary",startIcon:r.a.createElement(q.a,null),component:p.b,to:"/"},"Home Page")),r.a.createElement(u.a,{className:pe.logo,icon:d.a}),r.a.createElement("form",{className:pe.formContainer,onSubmit:m(me)},ue&&r.a.createElement(F.a,{inputProps:{name:"username",ref:l(de("Username")),"aria-autocomplete":"username"},color:"primary",className:pe.input,label:"Username",variant:"outlined",id:"username-input",error:void 0!==b.username,helperText:null===b||void 0===b||null===(e=b.username)||void 0===e?void 0:e.message}),r.a.createElement(F.a,{inputProps:{name:"email",type:"email",ref:l({required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),"aria-autocomplete":"email"},className:pe.input,label:"Email",variant:"outlined",id:"email-input",error:void 0!==b.email,helperText:null===b||void 0===b||null===(t=b.email)||void 0===t?void 0:t.message}),r.a.createElement(F.a,{inputProps:{name:"password",type:se?"password":"text",ref:l(de("Password")),"aria-autocomplete":ue?"":"password"},InputProps:{endAdornment:r.a.createElement(L.a,{position:"end"},r.a.createElement(R.a,{"aria-label":"toggle password visibility",onClick:function(){return ce(!se)},onMouseDown:function(e){return e.preventDefault()}},se?r.a.createElement(_.a,null):r.a.createElement(J.a,null)))},color:"primary",className:pe.input,label:"Password",variant:"outlined",id:"new-password-input",error:void 0!==b.password,helperText:null===b||void 0===b||null===(a=b.password)||void 0===a?void 0:a.message}),ue&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{inputProps:{name:"passwordRepeat",type:se?"password":"text",ref:l({validate:function(e){return e===h("password")||"Passwords don't match"}})},InputProps:{endAdornment:r.a.createElement(L.a,{position:"end"},r.a.createElement(R.a,{"aria-label":"toggle password visibility",onClick:function(){return ce(!se)},onMouseDown:function(e){return e.preventDefault()}},se?r.a.createElement(_.a,null):r.a.createElement(J.a,null)))},color:"primary",className:pe.input,label:"Repeat password",variant:"outlined",id:"repeat-password-input",error:void 0!==b.passwordRepeat,helperText:null===b||void 0===b||null===(o=b.passwordRepeat)||void 0===o?void 0:o.message})),C&&r.a.createElement(M.a,{className:pe.errorPaper,elevation:0},r.a.createElement(S.a,{className:pe.submitErrorMessage},C)),O&&r.a.createElement(M.a,{className:pe.successPaper,elevation:0},r.a.createElement(S.a,{className:pe.successMessage},O)),r.a.createElement("div",{className:pe.wrapper},r.a.createElement(v.a,{style:{width:"100%"},className:pe.wrappedButton,type:"submit",variant:"contained",color:"secondary",disabled:G},ue?"Sign Up":"Sign In"),G&&r.a.createElement(U.a,{size:24,className:pe.buttonProgress})),r.a.createElement(y.a,{classes:{root:pe.toolbarWrap}},r.a.createElement(S.a,{className:pe.text},ue?"Already registered?":"Not registered yet?"),r.a.createElement(W.a,{component:p.b,to:ue?"/signin":"/signup",onClick:function(){return T("")}},ue?"Sign In":"Sign Up")))),r.a.createElement(f,null)))},X=a(90),Y=function(e){var t=e.component,a=(e.computedMatch,Object(X.a)(e,["component","computedMatch"])),n=Object(D.b)();return(0,Object(s.a)(n,3)[2])()?r.a.createElement(c.b,Object.assign({component:t},a)):r.a.createElement(c.a,{to:{pathname:"/login"}})},ee=Object(n.lazy)((function(){return Promise.all([a.e(3),a.e(4)]).then(a.bind(null,199))})),te=function(e){var t=Object(D.b)(),a=Object(s.a)(t,3)[2];return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Lazy loading...")},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:k}),r.a.createElement(c.b,{exact:!0,path:"/signin"},a()?r.a.createElement(c.a,{to:{pathname:"/dashboard",state:{from:e.location}}}):r.a.createElement(Q,null)),r.a.createElement(c.b,{exact:!0,path:"/signup"},a()?r.a.createElement(c.a,{to:{pathname:"/dashboard",state:{from:e.location}}}):r.a.createElement(Q,null)),r.a.createElement(Y,{path:"/dashboard",component:ee}),r.a.createElement(c.a,{path:"*",to:{pathname:"/",state:{from:e.location}}})))},ae=a(179),ne=a(87),re=a(180),oe=Object(n.createContext)(),ie=function(e){var t=e.children,a=Object(D.b)(),n=Object(s.a)(a,1)[0],o=C.a.create({baseURL:T});return o.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(n.accessToken),e}),(function(e){return Promise.reject(e)})),r.a.createElement(oe.Provider,{value:{authAxios:o}},t)},se=Object(ne.a)({palette:{primary:{main:"#7c95e6"},secondary:{main:"#7EB3FF"},error:{main:"#EE3D48"}},typography:{fontFamily:["Sora","sans-serif"].join(",")}});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae.a,null,r.a.createElement(D.a,null,r.a.createElement(ie,null,r.a.createElement(re.a,{theme:se},r.a.createElement(p.a,null,r.a.createElement(te,null))))))),document.getElementById("root"))},25:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return s}));var n=a(11),r=a(0),o=a.n(r),i=Object(r.createContext)(),s=function(){var e=Object(r.useContext)(i);if(void 0===e)throw new Error("useAuth must be used within a AuthProvider");return[e.authState,e.setAuthState,e.isAuthenticated,e.logout]},c=function(e){var t=e.children,a=localStorage.getItem("accessToken"),s=localStorage.getItem("expiresAt"),c=localStorage.getItem("userInfo"),l=Object(r.useState)({accessToken:a,expiresAt:s,userInfo:c?JSON.parse(c):{}}),m=Object(n.a)(l,2),p=m[0],u=m[1],d=function(e){var t=e.accessToken,a=e.userInfo,n=e.expiresAt;localStorage.setItem("accessToken",t),localStorage.setItem("userInfo",JSON.stringify(a)),localStorage.setItem("expiresAt",n),u({accessToken:t,userInfo:a,expiresAt:n})};return o.a.createElement(i.Provider,{value:{authState:p,setAuthState:function(e){return d(e)},isAuthenticated:function(){return!(!p.accessToken||!p.expiresAt)&&(new Date).getTime()/1e3<p.expiresAt},logout:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("userInfo"),localStorage.removeItem("expiresAt"),u({accessToken:null,expiresAt:null,userInfo:{}})}}},t)}}},[[101,1,2]]]);
//# sourceMappingURL=main.c2511d8b.chunk.js.map